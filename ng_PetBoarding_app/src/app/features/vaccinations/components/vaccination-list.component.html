<div class="vaccination-list-container">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h6 class="fw-bold text-muted mb-0">
      <mat-icon class="me-2" style="font-size: 1.1rem">vaccines</mat-icon>
      Vaccinations ({{ vaccinations.length }})
    </h6>

    @if (canAdd && vaccinations.length > 0) {
      <button
        mat-raised-button
        color="primary"
        (click)="onAddVaccination()"
        class="add-vaccination-btn">
        <mat-icon class="me-2">add</mat-icon>
        Ajouter
      </button>
    }
  </div>

  <!-- Alertes -->
  @if (hasExpiredVaccinations) {
    <div class="alert alert-danger mb-3 d-flex align-items-center">
      <mat-icon class="me-2">warning</mat-icon>
      <span>Certaines vaccinations ont expiré. Veuillez consulter votre vétérinaire.</span>
    </div>
  }

  @if (hasExpiringSoonVaccinations && !hasExpiredVaccinations) {
    <div class="alert alert-warning mb-3 d-flex align-items-center">
      <mat-icon class="me-2">schedule</mat-icon>
      <span>Certaines vaccinations expirent bientôt (dans les 30 jours).</span>
    </div>
  }

  <!-- Liste des vaccinations -->
  @if (vaccinations.length === 0) {
    <mat-card class="empty-state shadow-sm">
      <mat-card-content class="text-center py-5">
        <mat-icon class="empty-icon mb-3">vaccines</mat-icon>
        <h6 class="text-muted mb-2">Aucune vaccination enregistrée</h6>
        <p class="text-muted small mb-3">
          Ajoutez les vaccinations de votre animal pour un suivi optimal de sa santé.
        </p>
        @if (canAdd) {
          <button mat-raised-button color="primary" (click)="onAddVaccination()">
            <mat-icon class="me-2">add</mat-icon>
            Ajouter la première vaccination
          </button>
        }
      </mat-card-content>
    </mat-card>
  } @else {
    <div class="vaccinations-grid">
      @for (vaccination of sortedVaccinations; track vaccination.id) {
        <app-vaccination
          [vaccination]="vaccination"
          [canEdit]="canEdit"
          [canDelete]="canDelete"
          (edit)="onEditVaccination($event)"
          (delete)="onDeleteVaccination($event)" />
      }
    </div>
  }
</div>
